now when we get al comments we will get the comments that are not filtered
-> we want to filter the comments by symbol
-> sort comment by newest
-> like this using query parameters

http://localhost:3453/api/comment?Symbol=tsla&lsDecsending=true 


Step 1: Create QueryObject Class


 File: Helpers/CommentQueryObject.cs
-> check for details

step 2: modify Commentcontroller 
check GetAll for details

step 3: 
modify ICommentRepository to accept the query object

step 4: modify CommentRepository to accept the query object

step 5 in CommentRepository.cs 
modify GetAllAsync 

replace this 
      return await _context.Comments.Include(a => a.AppUser).ToListAsync();


      with this

       var comments =  _context.Comments.Include(a => a.AppUser).AsQueryable();

            if (!string.IsNullOrEmpty(commentQueryObject.Symbol))
            {

                // only comments related to this stock
                comments = comments.Where(s => s.Stock.Symbol == commentQueryObject.Symbol);

            }
            if (commentQueryObject.IsDecsending == true)
            {
                comments = comments.OrderByDescending(c => c.CreatedOn);
            }



            return await comments.ToListAsync();

            //cors setup
            in program .cs


            //  CORS middleware configure kar rahe hain
app.UseCors(x => x

    //  Agar tum chahte ho ke sirf PUT requests allow hon
    // To AllowAnyMethod() ki jagah Use karo:
    // .WithMethods("PUT") // sirf PUT allow hoga
    .AllowAnyMethod() // <-- Ye sab methods allow karega (GET, POST, PUT, DELETE, etc.)

    //  Agar tum chahte ho ke sirf specific headers allow hon, to yeh likho:
    // .WithHeaders("Content-Type") // sirf Content-Type header allow hoga
    // .WithHeaders("Authorization") // sirf Authorization header allow hoga
    .AllowAnyHeader() // <-- Ye har header allow karega (Authorization, Content-Type, etc.)

    // Agar tum frontend se cookies ya JWT bhejna chahte ho to ye enable karo
    .AllowCredentials()

    //  SetIsOriginAllowed => true ka matlab har origin allow hoga (localhost, vercel, netlify, etc.)
    //  Ye sirf development mein theek hai — production mein risky hai!
    .SetIsOriginAllowed(origin => true)

    // Safer option (production) ke liye specific frontend origin likho:
    // .WithOrigins("http://localhost:3000") // React dev server
    // .WithOrigins("https://your-frontend.com") // deployed frontend site
);










